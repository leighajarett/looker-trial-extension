"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ProxySession = void 0;
const authSession_1 = require("./authSession");
const browserTransport_1 = require("./browserTransport");
const transport_1 = require("./transport");
const constants_1 = require("./constants");
class ProxySession extends authSession_1.AuthSession {
    constructor(settings, proxyUrl, transport) {
        super(settings, transport || new browserTransport_1.BrowserTransport(settings));
        this.settings = settings;
        this.proxyUrl = proxyUrl;
    }
    isAuthenticated() {
        return true;
    }
    async authenticate(props) {
        if (!props.headers) {
            props.headers = {};
        }
        props.headers['X-Forwarded-For'] = props.url;
        props.headers[transport_1.LookerAppId] = `${transport_1.agentPrefix} ${constants_1.lookerVersion}`;
        props.url = this.proxyUrl;
        return props;
    }
}
exports.ProxySession = ProxySession;
//# sourceMappingURL=proxySession.js.map